### C++教程：静态成员变量与静态成员函数

#### 1. 知识点存在的背景、动机与意义

在面向对象编程中，类的每个对象通常拥有自己独立的成员变量和成员函数。然而，在某些场景下，我们希望类的所有对象共享某些数据或操作，这时候就需要使用**静态成员变量**和**静态成员函数**。

- **静态成员变量**：属于类本身，不依赖于类的任何特定对象。所有该类的对象共享同一份静态成员变量的副本。这在需要维护类级别的状态或计数时非常有用。
- **静态成员函数**：可以直接通过类名调用，不需要创建类的对象。它们主要操作静态成员变量，或者执行与类对象无关的操作。

#### 2. 基本概念

- **静态成员变量**：在类内声明时使用 `static`关键字，初始化通常在类外进行。
- **静态成员函数**：同样使用 `static`关键字声明，不能直接访问非静态成员变量，因为它们不依赖于类的实例。

#### 3. 语法讲解

**静态成员变量声明与定义示例**：

```cpp
class MyClass {
public:
    static int sharedValue; // 声明静态成员变量
};

// 在类外初始化静态成员变量
int MyClass::sharedValue = 0;
```

**静态成员函数声明与定义示例**：

```cpp
class MyClass {
public:
    static void setSharedValue(int value) { // 声明并定义静态成员函数
        sharedValue = value;
    }
    static int getSharedValue() {
        return sharedValue;
    }
};
```

#### 4. 注意事项和典型应用示例代码

- **注意事项**：

  - 静态成员初始化只发生一次，在程序生命周期内保持有效。
  - 静态成员函数没有隐含的 `this`指针，因此不能直接访问非静态成员。
  - 访问控制规则（public, private, protected）同样适用于静态成员。
- **典型应用示例**：统计类的对象数量

```cpp
class MyClass {
private:
    static int objectCount; // 统计对象数量
public:
    MyClass() {
        ++objectCount;
    }
    ~MyClass() {
        --objectCount;
    }
    static int getObjectCount() {
        return objectCount;
    }
};

// 初始化静态成员变量
int MyClass::objectCount = 0;

int main() {
    MyClass obj1;
    MyClass obj2;
    std::cout << "当前对象数量: " << MyClass::getObjectCount() << std::endl; // 输出：2
}
```

#### 5. 总结和高级用法简介

**总结**：静态成员变量和静态成员函数是C++中实现类级别数据共享和操作的重要机制，它们使得类可以维护全局状态或提供无需实例化的功能。

**高级用法简介**：

- **多线程环境下的同步**：在多线程环境中修改静态成员变量时，需要考虑线程安全问题，可能需要使用互斥锁等同步机制。
- **作为单例模式的基础**：静态成员可以辅助实现单例设计模式，确保类只有一个实例，并提供一个全局访问点。
- **作为工厂方法的实现**：静态成员函数常用于实现工厂方法模式，通过类方法创建并返回对象实例，而无需知道具体的构造细节。

掌握静态成员的使用，能够使你的C++编程更加灵活高效，特别是在处理类的全局状态和资源管理方面。

## 类的内存占用

累的成员占用和结构体相同，静态变量不占结构体空间，成员函数在代码段即储存在flash中
